#N canvas 103 78 963 662 10;
#X obj 79 50 inlet~ X;
#X obj 149 50 inlet~ Y;
#X obj 227 49 inlet~ Z;
#X obj 295 48 inlet~ brightness;
#X obj 536 468 outlet~ brightness;
#X text 64 487 A = viewing distance;
#X text 64 507 Sx = viewing angle X;
#X text 64 527 Sy = viewing angle Y;
#X obj 227 139 clip~ -0.9 0.9;
#X obj 439 48 inlet~ A;
#X obj 235 267 expr~ (($v1-$v4)/(($v2/$v3)+1))+$v4;
#X obj 506 47 inlet~ Sx;
#X obj 591 47 inlet~ Sy;
#X obj 79 333 expr~ (($v1-$v4)/(($v2/$v3)+1))+$v4;
#X obj 686 47 inlet~ shadow;
#X text 712 508 Derek Holzer;
#X text 712 557 macumbista@gmail.com;
#X text 224 558 SOURCE: "The 3-D Oscilloscope" \, Homer B. Tilton \,
1987;
#X text 313 476 Perspective formula:;
#X text 300 510 _____;
#X text 345 515 ) + Sx;
#X text 460 510 _____;
#X text 505 515 ) + Sy;
#X obj 79 448 outlet~ Xout;
#X obj 235 448 outlet~ Yout;
#X text 244 515 Xout = (;
#X text 404 515 Yout = (;
#X text 305 524 Z/A;
#X text 465 524 Z/A;
#X text 303 505 X-Sx;
#X text 463 505 Y-Sy;
#X obj 536 237 expr~ ($v2-$v1)/$v2;
#X obj 536 163 expr~ ($v1 + 1)*0.5;
#X text 712 532 Helsinki August 2018;
#X text 683 161 Convert Z to unipolar;
#X text 686 213 i(D) =;
#X text 733 202 Dmax - D;
#X text 730 213 ---------;
#X text 741 226 Dmax;
#X text 705 245 i = intensity;
#X text 705 263 D = distance;
#X obj 536 336 *~;
#X text 575 337 Multiply by brightness scaler;
#X text 681 306 Dunn & Parberry \, 2002;
#X text 582 288 SOURCE: "3D Math Primer for Graphics and Game Development"
\,;
#X obj 79 379 clip~ -1 1;
#X obj 235 379 clip~ -1 1;
#X text 36 408 Extreme settings create high amplitude signals. Clipping
for safety here recommended!;
#X obj 536 434 *~;
#N canvas 0 23 845 393 offscreen 0;
#X obj 152 85 inlet~;
#X obj 497 85 inlet~;
#X obj 152 202 outlet~;
#X obj 152 152 expr~ ($v1* -1)+1;
#X obj 152 124 expr~ (($v1 < -1) || ($v2 < -1))||(($v1 > 1) || ($v2
> 1));
#X text 190 181 Turn off brightness when X or Y are outside range of
(-1 \, 1);
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X restore 329 375 pd offscreen blanking;
#X obj 536 387 expr~ tanh($v1);
#X text 582 409 Brightness gamma curve modification: tanh function
applies "soft clipping" so input can be scaled by factor of 2-5 or
so without exceeding 1 at output.;
#X obj 551 311 *~ 2;
#X connect 0 0 13 0;
#X connect 1 0 10 0;
#X connect 2 0 8 0;
#X connect 2 0 32 0;
#X connect 3 0 52 0;
#X connect 8 0 10 1;
#X connect 8 0 13 1;
#X connect 9 0 10 2;
#X connect 9 0 13 2;
#X connect 10 0 46 0;
#X connect 10 0 49 1;
#X connect 11 0 13 3;
#X connect 12 0 10 3;
#X connect 13 0 45 0;
#X connect 13 0 49 0;
#X connect 14 0 31 1;
#X connect 31 0 41 0;
#X connect 32 0 31 0;
#X connect 41 0 50 0;
#X connect 45 0 23 0;
#X connect 46 0 24 0;
#X connect 48 0 4 0;
#X connect 49 0 48 1;
#X connect 50 0 48 0;
#X connect 52 0 41 1;
